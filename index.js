
const gouwu = {
    "message": "报告生成成功",
    "report": "- 购物中心名称：百联又一城购物中心\n- 购物中心位置：杨浦区淞沪路8号\n- 购物中心特点：是一个大型综合购物中心，涵盖众多国际国内知名品牌，有多种餐饮选择，还有电影院等娱乐设施。\n- 购物中心便利性评分：8分（距离国和小区较近，有多条公交线路可到达）\n- 购物中心商品丰富度评分：10分（包含服饰、美妆、家居、数码等各类商品，品牌众多）\n\n- 购物中心名称：中原城市广场\n- 购物中心位置：杨浦区国和路777号\n- 购物中心特点：集购物、餐饮、娱乐为一体，有不少特色小店，适合家庭消费。\n- 购物中心便利性评分：9分（就在附近区域，步行或者骑共享单车即可到达）\n- 购物中心商品丰富度评分：8分（商品种类较为丰富，能满足日常大部分需求）\n\n- 购物中心名称：悠方购物中心\n- 购物中心位置：杨浦区殷行路1286号\n- 购物中心特点：内部环境较好，有一些小众品牌和特色餐饮，经常举办各类主题活动。\n- 购物中心便利性评分：7分（距离小区有一定距离，但交通还算便利）\n- 购物中心商品丰富度评分：8分（商品种类较丰富，注重品质和时尚感）\n\n- 购物中心名称：控江旭辉MALL\n- 购物中心位置：杨浦区控江路2066号\n- 购物中心特点：新开业的购物中心，店铺新颖，有较多亲子互动的场所。\n- 购物中心便利性评分：7分（可通过公共交通到达，耗时较短）\n- 购物中心商品丰富度评分：7分（商品种类在不断丰富中）\n\n- 购物中心名称：宝地广场\n- 购物中心位置：杨浦区唐山路1018号\n- 购物中心特点：周边写字楼较多，有很多适合上班族的快时尚品牌和便捷餐饮。\n- 购物中心便利性评分：6分（距离相对较远，需要乘坐交通工具）\n- 购物中心商品丰富度评分：7分（以满足日常和办公需求的商品为主）"
}

const yiyuan = {
    "message": "报告生成成功",
    "report": "- 医院名称：上海交通大学医学院附属新华医院\n    - 医院位置：上海市杨浦区控江路1665号\n    - 医院特点：新华医院是一家综合性三级甲等医院，在儿科、心血管内科、皮肤科等多个科室有着雄厚的医疗实力，医疗设备先进，专家团队经验丰富。\n    - 医院总体评分：8分\n    - 医院注意事项：可通过医院官方网站、微信公众号或电话提前挂号，优势科室包括儿科、骨科等。\n- 医院名称：上海市杨浦区中心医院\n    - 医院位置：上海市杨浦区腾越路450号\n    - 医院特点：是一所集医疗、教学、科研、预防、保健为一体的二级甲等综合性医院，医院的康复科、内分泌科等科室口碑较好。\n    - 医院总体评分：7分\n    - 医院注意事项：可以在网上预约挂号，其康复科在周边地区比较知名。\n- 医院名称：长海医院\n    - 医院位置：上海市杨浦区长海路168号\n    - 医院特点：这是一家三级甲等综合性医院，在烧伤外科、整形外科、肝胆外科等领域处于领先水平，拥有众多知名专家和先进的医疗技术。\n    - 医院总体评分：8分\n    - 医院注意事项：挂号较为紧张，建议提前通过官方渠道挂号，烧伤外科等科室是优势科室。\n- 医院名称：上海中医药大学附属岳阳中西医结合医院\n    - 医院位置：上海市杨浦区甘河路110号\n    - 医院特点：集医疗、教学、科研为一体的三级甲等中西医结合医院，中医特色突出，在针灸、推拿、中医内科等方面有独特优势。\n    - 医院总体评分：7分\n    - 医院注意事项：可提前预约挂号，中医相关科室的专家号比较热门。\n- 医院名称：杨浦区市东医院\n    - 医院位置：上海市杨浦区市光路999号\n    - 医院特点：二级甲等综合性医院，在社区医疗服务方面较为突出，对周边居民日常就医提供了很多便利。\n    - 医院总体评分：6分\n    - 医院注意事项：可在医院现场或线上挂号，部分科室与上级医院有合作关系，方便患者转诊会诊。"
}

const formatKey = key => {
    if(key.includes('-')){
        return key.split('-')[1].trim()
    }
    return key.trim()
}
function parseGroup(markdown) {
    const lines = markdown.split('\n');
    const result = [];
    let currentItem = null;

    lines.forEach(line => {
        if (line.startsWith('- ')) {
            if (currentItem) {
                result.push(currentItem);
            }
            currentItem = {};
            const [key, value] = line.split('：');
            currentItem[formatKey(key)] = value.trim();
        } else if (currentItem && line.startsWith('    - ')) {
            console.log(line)
            const [key, value] = line.split('：');
            currentItem[formatKey(key)] = value.trim();
        }
    });

    if (currentItem) {
        result.push(currentItem);
    }

    return result;
}
function markdownToJson(markdown) {
    if(markdown.includes('\n\n')){
        return markdown.split('\n\n').map(mdGroup => parseGroup(mdGroup))
    }
    return parseGroup(markdown)
}
let c = parseGroup(yiyuan.report)
console.log(c)